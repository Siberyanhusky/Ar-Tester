<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>AR Brahma Final Fix</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.3.2/aframe/build/aframe-ar.js"></script>

    <style>
        body { margin:0; overflow:hidden; touch-action:none; }

        #openMateriBtn {
            position: fixed;
            top: 15px;
            right: 15px;
            padding: 10px 15px;
            background: #ffffffcc;
            border-radius: 10px;
            border: 2px solid black;
            font-weight: bold;
            display: none;
            z-index: 9999;
        }

        #materiPanel {
            position: fixed;
            width: 90%;
            left: 5%;
            top: 10%;
            background: white;
            padding: 20px;
            border: 2px solid black;
            border-radius: 15px;
            display: none;
            z-index: 10000;
        }

        #controls {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 10px;
            z-index: 9999;
        }

        .ctrl-btn {
            padding: 10px 15px;
            background: #ffffffcc;
            border-radius: 8px;
            border: 2px solid black;
            font-weight: bold;
        }
    </style>
</head>

<body>

<!-- UI -->
<button id="openMateriBtn">Materi</button>

<div id="materiPanel">
    <h3>Brahma â€” Dewa Pencipta</h3>
    <p>
        Brahma adalah salah satu Trimurti dalam Hindu: Brahma (pencipta), Wisnu (pemelihara),
        dan Siwa (pelebur). Brahma memiliki empat wajah yang melambangkan pengetahuan tanpa batas.
    </p>
    <button onclick="closeMateri()" class="ctrl-btn" style="width:100%;">Tutup</button>
</div>

<div id="controls">
    <button class="ctrl-btn" onclick="zoomIn()">Zoom +</button>
    <button class="ctrl-btn" onclick="zoomOut()">Zoom -</button>
    <button class="ctrl-btn" onclick="rotate()">Rotate</button>
    <button class="ctrl-btn" onclick="resetModel()">Reset</button>
</div>

<!-- AR Scene -->
<a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">

    <a-marker id="markerBrahma" type="pattern"
        url="https://raw.githubusercontent.com/Siberyanhusky/Ar-Tester/main/marker.patt">

        <a-entity id="brahmaModel" position="0 0 0" scale="1 1 1">

            <!-- DEPAN -->
            <a-plane src="https://raw.githubusercontent.com/Siberyanhusky/Ar-Tester/main/images/Brahmadepan.png"
                     position="0 0 0.5" rotation="0 0 0" width="1" height="1"></a-plane>

            <!-- BELAKANG -->
            <a-plane src="https://raw.githubusercontent.com/Siberyanhusky/Ar-Tester/main/images/Brahmabelakang.png"
                     position="0 0 -0.5" rotation="0 180 0" width="1" height="1"></a-plane>

            <!-- KIRI -->
            <a-plane src="https://raw.githubusercontent.com/Siberyanhusky/Ar-Tester/main/images/Brahmakiri.png"
                     position="-0.5 0 0" rotation="0 90 0" width="1" height="1"></a-plane>

            <!-- KANAN -->
            <a-plane src="https://raw.githubusercontent.com/Siberyanhusky/Ar-Tester/main/images/Brahmakanan.png"
                     position="0.5 0 0" rotation="0 -90 0" width="1" height="1"></a-plane>

        </a-entity>

    </a-marker>

    <a-entity camera></a-entity>

</a-scene>


<script>
let model = null;

document.addEventListener("DOMContentLoaded", () => {
    model = document.getElementById("brahmaModel");
    const marker = document.getElementById("markerBrahma");

    marker.addEventListener("markerFound", () => {
        document.getElementById("openMateriBtn").style.display = "block";
        document.getElementById("controls").style.display = "flex";
    });

    marker.addEventListener("markerLost", () => {
        document.getElementById("controls").style.display = "none";
    });
});

// ROTATE
function rotate() {
    let r = model.getAttribute("rotation");
    model.setAttribute("rotation", { x: r.x, y: r.y + 15, z: r.z });
}

// ZOOM
function zoomIn() {
    let s = model.getAttribute("scale");
    model.setAttribute("scale", { x: s.x + 0.1, y: s.y + 0.1, z: s.z + 0.1 });
}

function zoomOut() {
    let s = model.getAttribute("scale");
    model.setAttribute("scale", {
        x: Math.max(0.3, s.x - 0.1),
        y: Math.max(0.3, s.y - 0.1),
        z: Math.max(0.3, s.z - 0.1)
    });
}

// RESET
function resetModel() {
    model.setAttribute("scale", { x: 1, y: 1, z: 1 });
    model.setAttribute("rotation", { x: 0, y: 0, z: 0 });
}

// MATERI
function closeMateri() {
    document.getElementById("materiPanel").style.display = "none";
}

document.getElementById("openMateriBtn").onclick = () => {
    document.getElementById("materiPanel").style.display = "block";
};
</script>

</body>
</html>
